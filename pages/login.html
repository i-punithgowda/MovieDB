<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | MovieDB ðŸŽ¥ </title>
    <link rel="stylesheet" href="../css/auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>
    <div class="container">
       <section class="signup-section">
           <h1 class="heading">Login</h1>
           <p class="alt">or login with </p>
           <span class="btn"><i class="fa-brands fa-google" ></i> login with Google</span>
           <span class="btn"><i class="fa-brands fa-facebook"></i> login with Facebook</span>
<br>
            <div class="form-items">
                <form>
                    <input type="text" name="email" id="email" placeholder="Email" style="display:block;width:100%;margin:0;"> <br/>
                    <input type="password" name="passwd" id="passwd" placeholder="Password" style="display:block;width:100%;margin:0;"> 
                   <div class="btn-submit" onclick="validate()">
                    <i class="fa-solid fa-arrow-right"></i>
                   </div>
                </form>
            </div>
            <p > New user ? Click here to <span><a href="sign-up.html" style="color:#ff0000;text-decoration:none;">Sign up</a></span></p>


       </section>
       <div class="cover-pic">
           <img src="../img/login.png" alt="">
       </div>
    </div>
    <script>
        var url=window.location.search
        var param= new URLSearchParams(url)
        var email=param.get('email')
        document.getElementById("email").value=email

        function validate(){
            var count=0
            var email=document.getElementById("email").value
            var password=document.getElementById("passwd").value
            fetch('../js/users.json')
            .then(response=>response.json())
            .then((data)=>{
                var users=data.users
             for(var i=0;i<users.length;i++){
                 if(email==users[i].email && password==users[i].password){
                     count=1
                 }
             }
              if(count==1){
                  alert("Welcome ! login succesful")
                  window.location.href="home.html"
              }else{
                  alert("Either username or password is wrong!!")
              }
            })
        }
    </script>
</body>
</html>